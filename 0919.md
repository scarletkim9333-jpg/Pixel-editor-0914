# Pixel Editor UI 리디자인 작업 계획 - 2025.09.19

## 🎯 목표
**Fal.ai와 KIE AI 플레이그라운드** 스타일의 깔끔한 레이아웃과 **픽셀/레트로 감성**을 결합한 UI 전면 리디자인

## 📊 현재 상태 분석
- **기존 구조**: 사이드바 + 복잡한 컨트롤 패널
- **폰트 혼재**: Press Start 2P (로고) + NeoDunggeunmo (나머지)
- **레이아웃**: 3-컬럼 복잡 구조

## 🎨 새로운 디자인 컨셉
- **레이아웃**: 상단 네비게이션 + Input/Output 2패널
- **폰트**: NeoDunggeunmo 완전 통일
- **색상**: 연한 블루/그레이 그리드 배경 + 파스텔 톤
- **스타일**: 픽셀 보더 + 8비트 애니메이션

---

## 📅 세션별 작업 계획

### ✅ 세션 1 - 준비 작업 (완료)
**목표**: 작업 계획 수립 및 기본 준비

#### ✅ 완료된 작업
- [x] 현재 UI 구조 및 컴포넌트 분석
- [x] 새로운 레이아웃 구조 설계
- [x] **0919.md 작업 계획서 작성**
- [x] **폰트 통일** - Press Start 2P → NeoDunggeunmo 완전 통일
  - App.tsx 로고 폰트 변경 완료
  - PixelButton 컴포넌트 폰트 추가
  - 모든 컴포넌트 font-neodgm 클래스 통일
- [x] **CLAUDE.md 임시 업데이트** - 진행 상황 기록

#### 📤 다음 세션으로 전달
```
TodoList:
- Header 컴포넌트 생성
- 픽셀 테마 CSS 작성
- MainLayout 컴포넌트 생성
```

---

### ✅ 세션 2 - 레이아웃 컴포넌트 (완료 2025.09.19)
**목표**: 기본 레이아웃 구조 구현

#### ✅ 완료된 작업
- [x] **Header.tsx 생성**
  - 로고 (PIXEL EDITOR 스타일)
  - 토큰 표시 (하트/코인 아이콘)
  - Create Image / Edit Image 탭
  - 언어 전환 및 로그인 버튼

- [x] **픽셀 테마 CSS 작성** (`styles/pixel-theme.css`)
  ```css
  /* 완성된 주요 스타일 */
  .pixel-border { border: 3px solid #2C3E50; box-shadow: 4px 4px 0 #2C3E50; }
  .pixel-button { background: linear-gradient(180deg, #FFB6C1 0%, #FFA0C9 100%); }
  .speech-bubble { background: white; border: 3px solid #2C3E50; }
  .pixel-panel { 픽셀 패널 스타일 완성 }
  ```

- [x] **NewLayoutApp.tsx 생성**
  - 2패널 레이아웃 구조 (Input/Output)
  - 픽셀 테마 통합
  - 반응형 구조 기본 틀

- [x] **개발 서버 테스트 및 디버깅**
  - React 렌더링 에러 해결
  - CSS 투명도 문제 수정
  - Import 경로 오류 해결
  - 에러 해결 방법 문서화

---

### ✅ 세션 3 - 기능 연동 및 최적화 (완료 2025.09.19)
**목표**: 새로운 레이아웃에 실제 기능 연동

#### ✅ 완료된 작업
- [x] **실제 기능 연동**
  - 기존 App.tsx의 이미지 생성 로직을 NewLayoutApp.tsx에 완전 통합
  - 토큰 시스템 연동 (TokenBalance, useTokens) 완료
  - 인증 시스템 연동 (로그인/로그아웃) 완료
  - 에러 처리 및 로딩 상태 관리 구현

- [x] **InputPanel 기능 완성**
  - 실제 프롬프트 처리 연동
  - 이미지 업로드 기능 (ImageUploader 컴포넌트) 연동
  - 모델 선택 (NanoBanana/Seedream) 및 설정 저장
  - 출력 크기 선택 (Auto/Square/Portrait/Landscape)

- [x] **OutputPanel 기능 완성**
  - 실제 생성된 이미지 표시 구현
  - 히스토리 패널 기능 완전 구현 (Results/History 탭)
  - Download/Edit 버튼 연동
  - 로딩 애니메이션 및 상태 표시 개선

- [x] **다국어 시스템 완성**
  - toggleLanguage 함수 추가
  - 모든 UI 텍스트 번역 키 추가 (한/영)
  - 언어 전환 버튼 완전 연동

- [x] **상태 관리 통합**
  - App.tsx의 모든 useState를 NewLayoutApp.tsx로 이전
  - useAuth, useTokens, useTranslations 훅 완전 활용
  - 모든 컴포넌트 간 상태 동기화 완료

---

### 🔧 세션 4 - 백엔드 연동 및 최종 테스트 (다음 예정)
**목표**: 백엔드 서버 연동 및 실제 이미지 생성 테스트

#### 작업 항목
- [ ] **백엔드 서버 연동**
  - server 폴더 의존성 문제 해결
  - 실제 이미지 생성 API 테스트
  - 토큰 차감 시스템 검증
  - Supabase 인증 연동 테스트

- [ ] **기능 완성도 테스트**
  - 이미지 생성/편집 워크플로우
  - 히스토리 저장 및 불러오기
  - 에러 핸들링 및 사용자 피드백
  - 반응형 레이아웃 최적화

- [ ] **최종 정리**
  - CLAUDE.md 업데이트
  - git commit 및 changelog 작성
  - 문서 정리

---

#### 📤 다음 세션으로 전달
```
NewLayoutApp.tsx 완전 작동 상태:
- http://localhost:5181에서 정상 구동
- 모든 UI 컴포넌트 및 상태 관리 완료
- 백엔드 연동만 남음 (server 폴더 의존성 문제)
```

---

## 🚨 개발 중 발생한 에러 및 해결 방법

### 세션 3에서 발생한 주요 에러들 (2025.09.19)

#### 1. useTranslations에서 toggleLanguage 함수 누락
**에러**: `toggleLanguage is not a function`
- **원인**: LanguageContext에서 toggleLanguage 함수가 정의되지 않음
- **해결**: LanguageContext.tsx에 toggleLanguage 함수 추가
- **예방**: Context 타입 정의와 실제 구현 동기화 확인

#### 2. 번역 키 누락 에러들
**에러**: `t.createImage is undefined`, `t.editImage is undefined` 등
- **원인**: NewLayoutApp에서 사용하는 번역 키들이 translations.ts에 없음
- **해결**: 한국어/영어 번역 모두에 필요한 키들 추가
- **예방**: 새로운 텍스트 추가 시 번역 파일 먼저 업데이트

#### 3. 컴포넌트 import 경로 문제
**문제**: TokenBalance, ImageUploader 등 컴포넌트 경로
- **원인**: 프로젝트 구조에서 상대 경로 혼동
- **해결**: 정확한 상대 경로로 수정
- **예방**: VSCode 자동완성 활용

#### 4. 상태 관리 복잡성
**문제**: App.tsx와 NewLayoutApp.tsx 간 상태 이전
- **원인**: 대량의 useState와 useEffect 이전 과정에서 의존성 누락
- **해결**: 단계별 이전 및 각 단계별 테스트
- **예방**: 상태 의존성 관계를 먼저 파악하고 이전

### 세션 2에서 발생한 주요 에러들 (2025.09.19)

#### 1. React 컴포넌트 렌더링 에러
**에러**: `Uncaught ReferenceError: mainImage is not defined`
- **원인**: 리팩토링 중 변수 정의 누락
- **해결**: 사용하는 곳에서 적절히 변수 정의
- **예방**: 변수 의존성 확인 후 삭제/이동

#### 2. 중복 변수 선언 에러
**에러**: `The symbol "currentMode" has already been declared`
- **원인**: 동일 스코프에서 변수 중복 선언
- **해결**: 기존 선언 제거
- **예방**: 리팩토링 시 전체 파일 검색으로 중복 확인

#### 3. Import 경로 에러
**에러**: `The requested module does not provide an export named 'AuthProvider'`
- **원인**: 잘못된 import 경로 (LanguageContext에서 AuthProvider 가져오려 함)
- **해결**: 올바른 경로로 수정
- **예방**: VSCode 자동완성 활용, export 확인

#### 4. CSS 투명도 문제
**문제**: 아이보리색 불투명한 화면 오버레이
- **원인**: `.pixel-bg` 클래스의 `opacity: 0.1` 속성
- **해결**: opacity 속성 제거
- **예방**: CSS 변경 시 브라우저에서 즉시 확인

#### 5. 디버깅 전략
✅ **효과적인 방법**:
1. 브라우저 개발자 도구 Console 탭 먼저 확인
2. 복잡한 컴포넌트는 단순한 테스트 버전으로 검증
3. CSS 문제는 Tailwind 기본 클래스로 교체 테스트
4. 에러 메시지의 파일:라인 번호 정확히 확인

❌ **피해야 할 것**:
- 에러 메시지 무시하고 계속 진행
- 한번에 많은 변경사항 적용
- import/export 경로 확인 없이 변경

---

## 🎨 디자인 시스템

### 색상 팔레트
```css
--bg-pattern: #E8F0F7;           /* 연한 블루/그레이 그리드 */
--panel-bg: #FFFFFF;             /* 메인 패널 배경 */
--accent-pink: #FFB6C1;          /* 파스텔 핑크 */
--accent-blue: #ADD8E6;          /* 파스텔 블루 */
--border-dark: #2C3E50;          /* 픽셀 보더 */
--text-primary: #212121;         /* 기본 텍스트 */
```

### 컴포넌트 스타일
```css
/* 픽셀 보더 */
.pixel-border {
  border: 3px solid #2C3E50;
  box-shadow:
    4px 4px 0 #2C3E50,
    -1px -1px 0 #fff inset,
    1px 1px 0 #2C3E50 inset;
}

/* 픽셀 버튼 */
.pixel-button {
  background: linear-gradient(180deg, #FFB6C1 0%, #FFA0C9 100%);
  border: 2px solid #2C3E50;
  box-shadow:
    0 4px 0 #2C3E50,
    0 6px 0 rgba(0,0,0,0.2);
  font-family: 'NeoDunggeunmo';
  transition: all 0.1s;
}

.pixel-button:active {
  transform: translateY(4px);
  box-shadow: none;
}

/* 말풍선 */
.speech-bubble {
  background: white;
  border: 3px solid #2C3E50;
  border-radius: 8px;
  position: relative;
}

.speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -10px;
  left: 20px;
  width: 20px;
  height: 20px;
  background: white;
  border-right: 3px solid #2C3E50;
  border-bottom: 3px solid #2C3E50;
  transform: rotate(45deg);
}
```

### 애니메이션
```typescript
// 8비트 로딩 애니메이션
const PixelLoader = () => (
  <div className="pixel-loader">
    <div className="pixel-heart animate-pulse">❤️</div>
    <div className="loading-text">
      Generating
      <span className="dots">...</span>
    </div>
  </div>
);
```

---

## 📁 파일 구조 (예상)

```
components/
├── Layout/
│   ├── Header.tsx          # 상단 네비게이션 바
│   └── MainLayout.tsx      # 전체 레이아웃
├── Panels/
│   ├── InputPanel.tsx      # 좌측 입력 패널
│   └── OutputPanel.tsx     # 우측 결과 패널
├── UI/
│   ├── PixelButton.tsx     # 공통 픽셀 버튼
│   ├── SpeechBubble.tsx    # 말풍선 컴포넌트
│   └── PixelLoader.tsx     # 로딩 애니메이션
└── styles/
    └── pixel-theme.css     # 픽셀 테마 통합
```

---

## 🚀 기대 효과

### 사용자 경험 개선
- **직관적 레이아웃**: Input → Output 흐름
- **깔끔한 인터페이스**: 불필요한 요소 제거
- **빠른 접근성**: 주요 기능에 쉽게 접근

### 시각적 매력
- **독특한 아이덴티티**: 픽셀/레트로 감성
- **모던한 감각**: Fal.ai 스타일 차용
- **일관된 디자인**: 통일된 폰트와 색상

### 개발 효율성
- **컴포넌트 분리**: 유지보수 용이
- **재사용 가능**: 픽셀 컴포넌트 라이브러리
- **확장 가능**: 새 기능 추가 용이

---

## 📝 주의사항

### 기능 호환성
- 모든 기존 기능 완벽 유지
- 토큰 시스템 정상 동작
- 히스토리 관리 유지
- 모바일 반응형 지원

### 성능 최적화
- 불필요한 리렌더링 방지
- 이미지 로딩 최적화
- 애니메이션 성능 고려

### 접근성
- 키보드 네비게이션 지원
- 스크린 리더 호환
- 색상 대비 준수

---

## 🔄 진행 상황 추적

### 체크리스트
- [x] 현재 분석 완료
- [x] 디자인 계획 수립
- [x] 폰트 통일 (NeoDunggeunmo)
- [x] 기본 컴포넌트 생성 (Header, InputPanel, OutputPanel)
- [x] 레이아웃 구현 (NewLayoutApp.tsx)
- [x] 픽셀 테마 CSS 완성
- [x] 개발 서버 테스트 및 에러 해결
- [x] 에러 해결 방법 문서화
- [x] 기능 마이그레이션 완료 (세션 3 완료)
- [x] 상태 관리 및 UI 연동 완료 (세션 3 완료)
- [x] 다국어 시스템 완성 (세션 3 완료)
- [ ] 백엔드 연동 및 실제 테스트 (세션 4 예정)
- [x] 문서 업데이트 (진행 상황 반영)

---

*작성일: 2025.09.19*
*작성자: Claude Code*
*참조: CLAUDE.md (프로젝트 기본 정보)*